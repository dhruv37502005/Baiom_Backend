{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ChatBot</title>

    <link rel="stylesheet" href="{% static 'chatbot\css\style.css' %}" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0"
    />
    <!-- <link rel="stylesheet" href="{% static 'courses\css\sidebar.css' %}"> -->
    <script
      src="https://code.jquery.com/jquery-3.7.1.js"
      integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4="
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <div class="chatbot-container">
      <div class="chatbot-content" id="chatbot-content">
        <div class="inner-content">
          <button id="expand-more" class="button-chatbot-more">
            <span class="material-symbols-outlined"> expand_more </span>
          </button>
          <!-- <h1> CHATBOT</h1> -->
          <div>
            <div id="chatbot">
              <p><span>Hi there</span></p>
            </div>

            <div id="userInput">
              <input
                type="text"
                id="textInput"
                name="userMessage"
                placeholder="Type your message.."
              />
              <input type="button" value="Send" id="buttonInput" />
            </div>
          </div>
        </div>
      </div>
      <button
        class="chatbot-icon button-chatbot-less"
        id="chatbot-icon"
        style="width: 150px; height: 100px"
      >
        <img
          src="{% static 'chatbot/img/logo.png' %}"
          alt=""
          width="150px"
          height="100px"
        />
        <!-- <span class="material-symbols-outlined">
            chat
        </span> -->
        <!-- <span class="material-symbols-outlined">
            expand_less
        </span> -->
      </button>
    </div>

    <script>
      function getUserResponse() {
        var userText = $("#textInput").val();
        var userHTML =
          "<p class='userText'>User: <span>" + userText + "</span></p>";
        $("#textInput").val("");

        $("#chatbot").append(userHTML);

        $.get("/chatbot/getResponse", { userMessage: userText }).done(function (
          data
        ) {
          var returnedMessage =
            "<p class='botText'>Chatbot:<span>" + data + "</span></p>";
          $("#chatbot").append(returnedMessage);
        });
      }

      $("#buttonInput").click(function () {
        getUserResponse();
      });

      var icon = document.getElementById("chatbot-icon");
      var content = document.getElementById("chatbot-content");
      var expand_more = document.getElementById("expand-more");
      icon.addEventListener("click", () => {
        content.style.display = "revert";
        icon.style.display = "none";
      });
      expand_more.addEventListener("click", () => {
        content.style.display = "none";
        icon.style.display = "revert";
      });
    </script>
  </body>
</html>
